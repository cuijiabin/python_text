# coding=utf-8
import requests


# 批量调取接口 select DISTINCT item_id from brand_stock_item_channel where channel_id = 1 AND tz_item_id = 0 and `status` = 1;
def reset_pre_qty(item_list):
    r = requests.get("http://10.5.105.104:9089/stock/resetPreQty?itemIdList=" + item_list)
    print(r.content.decode("utf-8"))


# 修正锁定库存接口数据
def reset_lock_qty(item_list):
    r = requests.get("http://10.5.105.104:9089/stock/resetLockQty?itemIdList=" + item_list)
    print(r.content.decode("utf-8"))


def partition_list(input_list, num):
    return [input_list[i:i + num] for i in range(0, len(input_list), num)]


if __name__ == "__main__":
    # python 列表切割 select DISTINCT item_id from brand_stock_item_channel where channel_id = 1 AND tz_item_id = 0 and `status` = 1;
    input_list = [1223100, 2426338, 2474190, 2474219, 2474245, 2474252, 2474253, 2474342, 2474565, 2474573, 2506747,
                  2506748, 2580668, 2734559, 2779360, 2812063, 2936687, 3070959, 3327873, 3328410, 3328439, 3727314,
                  3727315, 3727316, 4155625, 4191604, 4208124, 4210722, 4210723, 4347017, 4408044, 4516701, 4541654,
                  4644500, 4644501, 4644502, 4644503, 4644504, 4679909, 4741654, 4774851, 4794867, 4794894, 4948636,
                  4948638, 4948639, 4992192, 5079079, 5092969, 5116768, 5116770, 5116774, 5116776, 5132924, 5132925,
                  5182983, 5206946, 5235768, 5252902, 5259272, 5261757, 5261758, 5263691, 5266154, 5279948, 5315749,
                  5376323, 5376324, 5377045, 5413266, 5428763, 5434273, 5482952, 5486227, 5486228, 5486232, 5513608,
                  5546633, 5546636, 5546638, 5546639, 5546642, 5546643, 5556228, 5560179, 5565211, 5565212, 5569695,
                  5591048, 5591049, 5591050, 5596530, 5596531, 5596532, 5596533, 5596534, 5596535, 5607533, 5613351,
                  5613352, 5613367, 5613369, 5613370, 5613371, 5613372, 5613772, 5628290, 5630961, 5637668, 5637669,
                  5637670, 5637671, 5637672, 5637676, 5637677, 5645221, 5645222, 5645223, 5647943, 5657765, 5657766,
                  5661863, 5661968, 5670420, 5685366, 5686468, 5686761, 5690129, 5698114, 5712772, 5714053, 5732023,
                  5743913, 5743975, 5756242, 5757882, 5757883, 5757884, 5757885, 5757886, 5757887, 5757888, 5757914,
                  5757915, 5760006, 5760008, 5760010, 5760489, 5760490, 5760793, 5761482, 5762514, 5762515, 5763042,
                  5764912, 5766942, 5766943, 5766944, 5766945, 5766946, 5766948, 5772196, 5772197, 5772822, 5779373,
                  5782364, 5782947, 5791306]
    p_list = partition_list(input_list, 10)
    for inner in p_list:
        inner = list(map(lambda x: str(x), inner))
        item_list = ",".join(inner)
        # reset_pre_qty(item_list)
        reset_lock_qty(item_list)
